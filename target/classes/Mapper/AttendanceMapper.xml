<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.edu.cqu.Dao.AttendanceMapper">

	<select id="total_time_by_student_id"
		resultType="java.lang.String">
		SELECT
		count(*)
		FROM
		attendance_view
		where
		attendance_status = 1
		and student_id = #{student_id}
	</select>

	<select id="total_duration_by_student_id"
		resultType="java.lang.String">
		SELECT
		sum(activity_duration)
		FROM
		attendance_view
		where
		attendance_status = 1 and student_id = #{student_id}
	</select>

	<select id="select_all_by_student_id"
		resultType="cn.edu.cqu.Model.vAttendance">
		select *
		from attendance_view
		where student_id =
		#{student_id}
	</select>

	<select id="total_duration_by_branch_id"
		resultType="java.lang.String">
		SELECT
		sum(activity_duration)
		FROM
		attendance_view
		where
		branch_id = #{branch_id}
	</select>

	<select id="total_time_by_branch_id"
		resultType="java.lang.String">
		SELECT
		count(*)
		FROM
		attendance_view
		where
		branch_id =
		#{branch_id}
	</select>

	<select id="select_all_by_branch_id"
		resultType="cn.edu.cqu.Model.vAttendance">
		select *
		from attendance_view
		where branch_id =
		#{branch_id}
	</select>

	<select id="select_now_by_student_id"
		resultType="cn.edu.cqu.Model.vAttendance">
		select *
		from attendance_view
		where student_id =
		#{student_id} and attendance_status = 4
	</select>

</mapper>